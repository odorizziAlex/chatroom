{"ast":null,"code":"var _jsxFileName = \"/Users/alexodorizzi/Desktop/Projects/ChatRoom/chatroom/src/components/MainContentArea.js\";\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Chat from \"./Chat/Chat\";\nimport axios from \"axios\";\nimport { v4 as uuidv4 } from 'uuid';\n\nconst MainContentArea = () => {\n  const loggedInUserId = 0;\n  const [newUserName, setNewUserName] = useState(\"\");\n  const [currentUser, setCurrentUser] = useState([]);\n  const [isShowPopup, setIsShowPopup] = useState(true);\n  const [usernameIsTooShort, setUsernameIsTooShort] = useState(false);\n\n  const handleUserNameInputChange = e => {\n    setNewUserName(e.target.value);\n  };\n\n  useEffect(() => {\n    console.log(currentUser);\n  }, [isShowPopup]);\n\n  const onUserNameSubmit = e => {\n    e.preventDefault();\n    let newUsr = {\n      customId: uuidv4(),\n      username: newUserName\n    };\n    addUserToDB(newUsr);\n    getCurrentUser(); // console.log(\"All Users: \",allUsers);\n    // console.log(\"logged in user:\", newUsr);\n    // setIsShowPopup(false);\n  };\n\n  const addUserToDB = async newUsr => {\n    await axios.post('http://localhost:5000/users/add', newUsr).then(res => {\n      console.log(res.data);\n    }).catch(err => {\n      console.log(\"error: \" + err);\n\n      if (newUsr.username.length < 3) {\n        setUsernameIsTooShort(true);\n      }\n    });\n  }; // const getCurrentUser = async () => {\n  //     let data = await axios.get(`http://localhost:5000/users/`)\n  //     return data;\n  // }\n\n\n  async function getCurrentUser() {\n    const response = await axios.get(\"http://localhost:5000/users/\");\n\n    if (response.status !== 200) {// Error\n    }\n\n    console.log(response.data);\n\n    for (let i = 0; i < response.length; i++) {\n      if (response.data[i].firstname === newUserName) {\n        setCurrentUser(response.data[i]);\n        break;\n      }\n    } // setAllUsers(response.data);\n\n\n    setIsShowPopup(false);\n  } // const getCurrentUser = () => {\n  //     let data = axios.get(`http://localhost:5000/users`)\n  //     .then(res => {\n  //         return res.data;\n  //     })\n  //     .catch(err => console.log(\"error: \"+err));\n  //     return data;\n  // }\n  // window.addEventListener('beforeunload', function (e) {\n  //     console.log(\"close\");\n  //     axios.delete(`http://localhost:5000/users/delete/${newUser.customId}`)\n  //     .then(res => {\n  //         console.log(res.data);\n  //     })\n  //     .catch(err => console.log(\"error: \"+err));\n  //     e.preventDefault();\n  //     e.returnValue = '';\n  // });\n\n\n  return /*#__PURE__*/React.createElement(StyledArea, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, isShowPopup && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Overlay, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Popup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(StyledInput, {\n    type: \"text\",\n    value: newUserName,\n    onChange: handleUserNameInputChange,\n    placeholder: \"Pick a Username...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }), newUserName !== \"\" && /*#__PURE__*/React.createElement(StyledButton //onsubmit ???\n  , {\n    onClick: onUserNameSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }, \"Create. User.\")), usernameIsTooShort && /*#__PURE__*/React.createElement(Warning, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, \"The Username has to have at least 3 characters.\"))), /*#__PURE__*/React.createElement(Chat, {\n    userId: loggedInUserId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default MainContentArea;\nconst Overlay = styled.div`\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 2;\n`;\nconst Popup = styled.div`\n// display: flex;\n    align-items: center;\n    justify-content: center;\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    padding: 20px;\n    background: var(--dark-grey);\n    border-radius: 10px;\n    float: left;\n    box-sizing: border-box;\n    border: 2px var(--dark-grey);\n    transition: all 0.2s;\n    z-index: 3;\n`;\nconst StyledButton = styled.button`\n    display: flex;\n    text-decoration: none;\n    justify-content: center;\n    padding: 10px 20px;\n    background: var(--light-grey);\n    color: var(--dark-grey);\n    font-weight: 600;\n    font-size: 1rem;\n    border: 0;\n    border-radius: 6px;\n    // margin-top: 10px;\n    // margin-right: 10px;\n    cursor: pointer;\n\n    &:focus {\n        outline: none;\n    }\n`;\nconst FormWrapper = styled.form`\n    display: flex;\n`;\nconst StyledInput = styled.input`\n    border: 0;\n    border-radius: 6px;\n    display: block;\n    width: 100%;\n    padding: 20px;\n    // font-size: 15px;\n    font-size: 1rem;\n    margin-right: 4px;\n    color: var(--black);\n    background: var(--light-grey);\n`;\nconst StyledArea = styled.div`\n    display: grid;\n    // grid-template-columns: 1fr 1fr;\n    padding: 20px;\n    background: var(--app-background);\n    overflow: auto;\n    height: 100vh;\n`;\nconst Warning = styled.div`\n    font-size: 13px;\n    color: var(--warning);\n    font-weight: bold;\n    padding-top: 20px;\n`;","map":{"version":3,"sources":["/Users/alexodorizzi/Desktop/Projects/ChatRoom/chatroom/src/components/MainContentArea.js"],"names":["React","useEffect","useState","styled","Chat","axios","v4","uuidv4","MainContentArea","loggedInUserId","newUserName","setNewUserName","currentUser","setCurrentUser","isShowPopup","setIsShowPopup","usernameIsTooShort","setUsernameIsTooShort","handleUserNameInputChange","e","target","value","console","log","onUserNameSubmit","preventDefault","newUsr","customId","username","addUserToDB","getCurrentUser","post","then","res","data","catch","err","length","response","get","status","i","firstname","Overlay","div","Popup","StyledButton","button","FormWrapper","form","StyledInput","input","StyledArea","Warning"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Chat from \"./Chat/Chat\";\nimport axios from \"axios\";\nimport { v4 as uuidv4 } from 'uuid';\n\n\nconst MainContentArea = () => {\n    const loggedInUserId = 0;\n    const [newUserName, setNewUserName] = useState(\"\");\n    const [currentUser, setCurrentUser] = useState([]);\n    const [isShowPopup, setIsShowPopup] = useState(true);\n    const [usernameIsTooShort, setUsernameIsTooShort] = useState(false);\n    \n    const handleUserNameInputChange = (e) => {\n        setNewUserName(e.target.value);\n    }\n\n    useEffect(() => {   \n        console.log(currentUser);\n    },[isShowPopup]);\n\n    const onUserNameSubmit = (e) => {\n        e.preventDefault();\n        let newUsr = {\n            customId:uuidv4(),\n            username:newUserName,\n        }\n\n        addUserToDB(newUsr);\n        getCurrentUser();\n\n        // console.log(\"All Users: \",allUsers);\n\n        // console.log(\"logged in user:\", newUsr);\n        // setIsShowPopup(false);\n    }\n\n\n    const addUserToDB = async (newUsr) => {\n        await axios.post('http://localhost:5000/users/add', newUsr)\n        .then(res => {\n            console.log(res.data)\n        })\n        .catch(err => {\n            console.log(\"error: \"+err);\n            if(newUsr.username.length < 3){\n                setUsernameIsTooShort(true);\n            }\n        });\n    }\n\n    // const getCurrentUser = async () => {\n    //     let data = await axios.get(`http://localhost:5000/users/`)\n    //     return data;\n    // }\n\n    async function getCurrentUser() {\n        const response = await axios.get(\"http://localhost:5000/users/\");\n        if (response.status !== 200) {\n          // Error\n        }\n        console.log(response.data);\n        for(let i=0;i<response.length;i++){\n            if(response.data[i].firstname === newUserName){\n                setCurrentUser(response.data[i]);\n                break;\n            }\n        }\n        // setAllUsers(response.data);\n        setIsShowPopup(false);\n      }\n\n    // const getCurrentUser = () => {\n    //     let data = axios.get(`http://localhost:5000/users`)\n    //     .then(res => {\n    //         return res.data;\n    //     })\n    //     .catch(err => console.log(\"error: \"+err));\n    //     return data;\n    // }\n\n    // window.addEventListener('beforeunload', function (e) {\n    //     console.log(\"close\");\n    //     axios.delete(`http://localhost:5000/users/delete/${newUser.customId}`)\n    //     .then(res => {\n    //         console.log(res.data);\n    //     })\n    //     .catch(err => console.log(\"error: \"+err));\n        \n    //     e.preventDefault();\n    //     e.returnValue = '';\n    // });\n\n\n    return (\n        <StyledArea>\n            {isShowPopup && \n            <>\n                <Overlay/>\n                <Popup>\n                    <FormWrapper>\n                        <StyledInput\n                            type=\"text\"\n                            value={newUserName}\n                            onChange={handleUserNameInputChange}\n                            placeholder=\"Pick a Username...\"\n                        />\n\n                        {newUserName !== \"\" && \n                        <StyledButton \n                        //onsubmit ???\n                            onClick={onUserNameSubmit}\n                        >\n                            Create. User.\n                        </StyledButton>}\n                    </FormWrapper>\n                    {usernameIsTooShort && \n                        <Warning>The Username has to have at least 3 characters.</Warning>\n                    }\n                </Popup>\n            </>\n            }\n            <Chat userId = {loggedInUserId}/>\n        </StyledArea>\n    );\n}\n\nexport default MainContentArea;\n\nconst Overlay = styled.div`\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 2;\n`;\n\nconst Popup = styled.div`\n// display: flex;\n    align-items: center;\n    justify-content: center;\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    padding: 20px;\n    background: var(--dark-grey);\n    border-radius: 10px;\n    float: left;\n    box-sizing: border-box;\n    border: 2px var(--dark-grey);\n    transition: all 0.2s;\n    z-index: 3;\n`;\n\nconst StyledButton = styled.button`\n    display: flex;\n    text-decoration: none;\n    justify-content: center;\n    padding: 10px 20px;\n    background: var(--light-grey);\n    color: var(--dark-grey);\n    font-weight: 600;\n    font-size: 1rem;\n    border: 0;\n    border-radius: 6px;\n    // margin-top: 10px;\n    // margin-right: 10px;\n    cursor: pointer;\n\n    &:focus {\n        outline: none;\n    }\n`;\n\nconst FormWrapper = styled.form`\n    display: flex;\n`;\n\nconst StyledInput = styled.input`\n    border: 0;\n    border-radius: 6px;\n    display: block;\n    width: 100%;\n    padding: 20px;\n    // font-size: 15px;\n    font-size: 1rem;\n    margin-right: 4px;\n    color: var(--black);\n    background: var(--light-grey);\n`;\n\nconst StyledArea = styled.div`\n    display: grid;\n    // grid-template-columns: 1fr 1fr;\n    padding: 20px;\n    background: var(--app-background);\n    overflow: auto;\n    height: 100vh;\n`;\n\nconst Warning = styled.div`\n    font-size: 13px;\n    color: var(--warning);\n    font-weight: bold;\n    padding-top: 20px;\n`;"]},"metadata":{},"sourceType":"module"}